# üìö –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Concrete Agent

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏–∑–∞ –±–µ—Ç–æ–Ω–∞ –∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã](#1-–æ–ø–∏—Å–∞–Ω–∏–µ-—Å–∏—Å—Ç–µ–º—ã)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#2-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
3. [–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã](#3-–∑–∞–ø—É—Å–∫-—Å–∏—Å—Ç–µ–º—ã)
4. [–†–∞–±–æ—Ç–∞ —Å API](#4-—Ä–∞–±–æ—Ç–∞-—Å-api)
5. [–ê–≥–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã](#5-–∞–≥–µ–Ω—Ç—ã-—Å–∏—Å—Ç–µ–º—ã)
6. [–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö](#6-–∑–∞–≥—Ä—É–∑–∫–∞-–∏-–∞–Ω–∞–ª–∏–∑-–¥–∞–Ω–Ω—ã—Ö)
7. [–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ](#7-–≤—ã—Ö–æ–¥–Ω—ã–µ-–¥–∞–Ω–Ω—ã–µ)
8. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#8-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é](#9-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)
10. [–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ](#10-–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)

---

## 1. –û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### üéØ –û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**Concrete Agent** ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ –±–∞–∑–µ LLM –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è:

- **–ê–Ω–∞–ª–∏–∑–∞ –±–µ—Ç–æ–Ω–∞**: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–∞—Ä–æ–∫ –±–µ—Ç–æ–Ω–∞ –∏ –º–µ—Å—Ç –∏—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- **–ê–Ω–∞–ª–∏–∑–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –∏—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–æ—Ä–º–∞—Ç–∏–≤–∞–º
- **–°—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–º–µ—Ç –∏ –≤–µ—Ä—Å–∏–π**: —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —Å–º–µ—Ç
- **–û–±—ä–µ–º–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞**: —Ä–∞—Å—á–µ—Ç –æ–±—ä–µ–º–æ–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìÑ **–ú–Ω–æ–≥–æ—Ñ–æ—Ä–º–∞—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: `.PDF`, `.DOCX`, `.DOC`, `.TXT`
- üìä **–ê–Ω–∞–ª–∏–∑ —Å–º–µ—Ç**: `.XLS`, `.XLSX`, `.CSV`, `.XML`
- üîé **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–∞—Ä–æ–∫ –±–µ—Ç–æ–Ω–∞**: B20, C25/30, C30/37 XF4 –∏ –¥—Ä—É–≥–∏–µ
- üèó **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**: –≥–¥–µ –∏–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–∞—Ä–∫–∏ –±–µ—Ç–æ–Ω–∞
- üìã **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è**: —Å–≤–µ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å–æ —Å–º–µ—Ç–∞–º–∏
- üì§ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã**: JSON, CSV, PDF —Ñ–æ—Ä–º–∞—Ç—ã
- üß† **–ò–ò-–∞–Ω–∞–ª–∏–∑**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Claude AI –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏
- üîÑ **SSRL**: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ü–∏–∫–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### üìÅ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

#### –í—Ö–æ–¥–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:
- **PDF**: –ø—Ä–æ–µ–∫—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, —á–µ—Ä—Ç–µ–∂–∏, —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **DOCX/DOC**: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è, –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤
- **TXT**: —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **XLS/XLSX**: —Å–º–µ—Ç—ã, –∫–∞–ª—å–∫—É–ª—è—Ü–∏–∏, —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- **CSV**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —ç–∫—Å–ø–æ—Ä—Ç—ã –∏–∑ —Å–∏—Å—Ç–µ–º
- **XML**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–º–µ—Ç—ã –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

#### –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã:
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: **50 –ú–ë**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∑–∞ –∑–∞–ø—Ä–æ—Å: **10 —Ñ–∞–π–ª–æ–≤**
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏: UTF-8, Windows-1251, CP1252

---

## 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### üìã –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python**: 3.9 –∏–ª–∏ –≤—ã—à–µ
- **–û–°**: Linux, macOS, Windows
- **–û–ó–£**: –º–∏–Ω–∏–º—É–º 4 –ì–ë, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8 –ì–ë
- **–î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ**: 2 –ì–ë –¥–ª—è —Å–∏—Å—Ç–µ–º—ã + –º–µ—Å—Ç–æ –¥–ª—è —Ñ–∞–π–ª–æ–≤

### üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã

#### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/alpro1000/concrete-agent.git
cd concrete-agent
```

#### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Linux/macOS)
source venv/bin/activate

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Windows)
venv\Scripts\activate
```

#### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

#### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
python -c "from app.main import app; print('‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Å–ø–µ—à–Ω–∞')"
```

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
cp .env.template .env
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env` —Ñ–∞–π–ª–∞

```bash
# === Claude API (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –ò–ò-—Ñ—É–Ω–∫—Ü–∏–π) ===
ANTHROPIC_API_KEY=your_anthropic_api_key_here
CLAUDE_MODEL=claude-3-sonnet-20240229
USE_CLAUDE=true

# === –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ===
LOG_LEVEL=INFO

# === –õ–∏–º–∏—Ç—ã —Ñ–∞–π–ª–æ–≤ ===
MAX_FILE_SIZE=52428800   # 50 –ú–ë
MAX_DOCUMENTS=10

# === –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ ===
UPLOAD_DIR=uploads
LOGS_DIR=logs

# === –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è ===
ALLOWED_EXTENSIONS=.pdf,.docx,.doc,.txt,.xml,.xls,.xlsx,.csv

# === –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ===
ENVIRONMENT=production
DEBUG=false
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞ Claude

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [console.anthropic.com](https://console.anthropic.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `ANTHROPIC_API_KEY`

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ë–µ–∑ API –∫–ª—é—á–∞ Claude —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ.

### üìÅ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```bash
mkdir -p uploads logs outputs examples
```

---

## 3. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### üöÄ –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞

#### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### –ó–∞–ø—É—Å–∫ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

```bash
gunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000
```

#### –ó–∞–ø—É—Å–∫ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

```bash
# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ—Ä—Ç–∞
uvicorn app.main:app --port 8080

# –° –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
uvicorn app.main:app --log-level info --access-log

# –î–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

#### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ API

```bash
curl http://localhost:8000/health
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{
  "status": "healthy",
  "timestamp": "2025-09-24T12:00:00Z",
  "uptime": "running"
}
```

#### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

```bash
curl http://localhost:8000/
```

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8000/docs`

### üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t concrete-agent .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 8000:8000 -e ANTHROPIC_API_KEY=your_key concrete-agent
```

---

## 4. –†–∞–±–æ—Ç–∞ —Å API

### üìä –û–±–∑–æ—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|----------|-------|----------|-----------|
| `/` | GET | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ | - |
| `/health` | GET | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ | - |
| `/status` | GET | –ü–æ–¥—Ä–æ–±–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã | - |
| `/docs` | GET | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API | - |
| `/analyze/concrete` | POST | –ê–Ω–∞–ª–∏–∑ –±–µ—Ç–æ–Ω–∞ | files |
| `/analyze/materials` | POST | –ê–Ω–∞–ª–∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ | files |
| `/compare/docs` | POST | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | files |
| `/compare/smeta` | POST | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–º–µ—Ç | files |
| `/upload/files` | POST | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ | files |

### üîç –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

#### 1. –ê–Ω–∞–ª–∏–∑ –±–µ—Ç–æ–Ω–∞ - `/analyze/concrete`

**–û–ø–∏—Å–∞–Ω–∏–µ**: –û—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –º–∞—Ä–æ–∫ –±–µ—Ç–æ–Ω–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `docs`: —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `smeta`: —Ñ–∞–π–ª —Å–º–µ—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ cURL**:

```bash
curl -X POST "http://localhost:8000/analyze/concrete" \
  -H "Content-Type: multipart/form-data" \
  -F "docs=@project_docs.pdf" \
  -F "docs=@specifications.docx" \
  -F "smeta=@budget.xlsx"
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ Python**:

```python
import requests

url = "http://localhost:8000/analyze/concrete"
files = {
    'docs': [
        ('project_docs.pdf', open('project_docs.pdf', 'rb')),
        ('specifications.docx', open('specifications.docx', 'rb'))
    ],
    'smeta': ('budget.xlsx', open('budget.xlsx', 'rb'))
}

response = requests.post(url, files=files)
result = response.json()
print(result)
```

#### 2. –ê–Ω–∞–ª–∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ - `/analyze/materials`

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –∏—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è.

```bash
curl -X POST "http://localhost:8000/analyze/materials" \
  -F "docs=@materials_spec.pdf" \
  -F "docs=@technical_requirements.docx"
```

#### 3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ - `/compare/docs`

**–û–ø–∏—Å–∞–Ω–∏–µ**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

```bash
curl -X POST "http://localhost:8000/compare/docs" \
  -F "docs=@version_1.pdf" \
  -F "docs=@version_2.pdf"
```

#### 4. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ - `/upload/files`

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

```bash
curl -X POST "http://localhost:8000/upload/files" \
  -F "files=@document.pdf" \
  -F "files=@spreadsheet.xlsx"
```

### üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å Postman

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Postman –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é** "Concrete Agent API"

2. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
   - `base_url`: `http://localhost:8000`

3. **–°–æ–∑–¥–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –±–µ—Ç–æ–Ω–∞**:
   - –ú–µ—Ç–æ–¥: `POST`
   - URL: `{{base_url}}/analyze/concrete`
   - Body: `form-data`
   - –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª—ã: –∫–ª—é—á `docs`, —Ç–∏–ø `File`

#### –ü—Ä–∏–º–µ—Ä –∫–æ–ª–ª–µ–∫—Ü–∏–∏ Postman

```json
{
  "info": {
    "name": "Concrete Agent API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/"
  },
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "url": "{{base_url}}/health"
      }
    },
    {
      "name": "Analyze Concrete",
      "request": {
        "method": "POST",
        "url": "{{base_url}}/analyze/concrete",
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "docs",
              "type": "file",
              "src": "/path/to/your/document.pdf"
            }
          ]
        }
      }
    }
  ]
}
```

---

## 5. –ê–≥–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ Concrete Agent –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞–Ω–∞–ª–∏–∑–∞.

### ü§ñ –û—Å–Ω–æ–≤–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã

#### 1. ConcreteAgent (`agents/concrete_agent.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –º–∞—Ä–æ–∫ –±–µ—Ç–æ–Ω–∞

**–§—É–Ω–∫—Ü–∏–∏**:
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–∞—Ä–æ–∫ –±–µ—Ç–æ–Ω–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (B20, C25/30, C30/37 XF4, –∏ —Ç.–¥.)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–π –º–∞—Ä–∫–∏
- –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–æ—Ä–º–∞—Ç–∏–≤–∞–º

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: PDF, DOCX –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: JSON —Å –º–∞—Ä–∫–∞–º–∏ –±–µ—Ç–æ–Ω–∞ –∏ –∏—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º

#### 2. VolumeAnalysisAgent (`agents/volume_agent/`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ –æ–±—ä–µ–º–æ–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

**–§—É–Ω–∫—Ü–∏–∏**:
- –†–∞—Å—á–µ—Ç –æ–±—ä–µ–º–æ–≤ –±–µ—Ç–æ–Ω–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ v√Ωkaz v√Ωmƒõr (–≤–µ–¥–æ–º–æ—Å—Ç–µ–π –æ–±—ä–µ–º–æ–≤)
- –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–Ω—ã—Ö –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±—ä–µ–º–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—ä–µ–º–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤

#### 3. MaterialsAgent (`agents/materials_agent.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

**–§—É–Ω–∫—Ü–∏–∏**:
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
- –ê–Ω–∞–ª–∏–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
- –í—ã—è–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

#### 4. SmetnyInzenyr (`agents/smetny_inzenyr/`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ —Å–º–µ—Ç –∏ –∫–∞–ª—å–∫—É–ª—è—Ü–∏–π

**–§—É–Ω–∫—Ü–∏–∏**:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏ —Ä–∞—Å—Ü–µ–Ω–æ–∫
- –ê–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–∞–≤–∞ —Ä–∞–±–æ—Ç
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–∞–ª—å–∫—É–ª—è—Ü–∏–π

#### 5. VersionDiffAgent (`agents/version_diff_agent.py`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–§—É–Ω–∫—Ü–∏–∏**:
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –ø—Ä–æ–µ–∫—Ç–æ–≤
- –í—ã—è–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –ê–Ω–∞–ª–∏–∑ –≤–ª–∏—è–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ —Å–º–µ—Ç—É
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### üîÑ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∞–≥–µ–Ω—Ç–æ–≤

```mermaid
graph TB
    A[–í—Ö–æ–¥–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã] --> B[ConcreteAgent]
    A --> C[VolumeAnalysisAgent]
    A --> D[MaterialsAgent]
    
    B --> E[–ê–Ω–∞–ª–∏–∑ –º–∞—Ä–æ–∫ –±–µ—Ç–æ–Ω–∞]
    C --> F[–†–∞—Å—á–µ—Ç –æ–±—ä–µ–º–æ–≤]
    D --> G[–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤]
    
    E --> H[SmetnyInzenyr]
    F --> H
    G --> H
    
    H --> I[–°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç]
    
    J[VersionDiffAgent] --> K[–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π]
    K --> I
```

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≥–µ–Ω—Ç–æ–≤

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã Claude
CLAUDE_MODE=enhancement  # –∏–ª–∏ primary

# –ú–æ–¥–µ–ª—å Claude
CLAUDE_MODEL=claude-3-sonnet-20240229

# –Ø–∑—ã–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
DEFAULT_LANGUAGE=cz  # –∏–ª–∏ en, ru

# –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤
USE_VOLUME_AGENT=true
USE_MATERIALS_AGENT=true
USE_DIFF_AGENT=true
```

#### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```python
from agents.concrete_agent import get_hybrid_agent

# –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
agent = get_hybrid_agent()

# –ê–Ω–∞–ª–∏–∑ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
result = await agent.analyze(
    doc_paths=['document1.pdf', 'document2.pdf'],
    smeta_path='budget.xlsx',
    use_claude=True,
    claude_mode='enhancement',
    language='ru'
)
```

---

## 6. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö

### üì§ –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

#### –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (API)

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤**:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ (–º–∞–∫—Å–∏–º—É–º 50 –ú–ë)
   - –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

2. **–ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ API**:
```python
import requests

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤
files = {
    'docs': [
        ('project.pdf', open('project.pdf', 'rb')),
        ('specs.docx', open('specs.docx', 'rb'))
    ]
}

# –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
response = requests.post(
    'http://localhost:8000/analyze/concrete',
    files=files
)

result = response.json()
```

#### –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

```bash
# –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
python analyze_concrete_complete.py --docs project.pdf specs.docx

# –ê–Ω–∞–ª–∏–∑ —Å–æ —Å–º–µ—Ç–æ–π
python analyze_concrete_complete.py \
  --docs project.pdf specs.docx \
  --smeta budget.xlsx

# –ê–Ω–∞–ª–∏–∑ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —è–∑—ã–∫–∞
python analyze_concrete_complete.py \
  --docs *.pdf \
  --language ru \
  --output results/
```

### üîç –ü—Ä–æ—Ü–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –≠—Ç–∞–ø—ã –∞–Ω–∞–ª–∏–∑–∞

1. **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**:
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–¥–∏—Ä–æ–≤–æ–∫

2. **–ü–µ—Ä–≤–∏—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑**:
   - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –í—ã—è–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤

3. **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**:
   - –ê–Ω–∞–ª–∏–∑ –º–∞—Ä–æ–∫ –±–µ—Ç–æ–Ω–∞
   - –†–∞—Å—á–µ—Ç –æ–±—ä–µ–º–æ–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–æ—Ä–º–∞—Ç–∏–≤–∞–º

4. **–ò–ò-–æ–±—Ä–∞–±–æ—Ç–∫–∞** (–ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º Claude):
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –£–ª—É—á—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

5. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞**:
   - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—ã—Ö–æ–¥–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞

```python
# –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —á–µ—Ä–µ–∑ –ª–æ–≥–∏
import logging

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# –õ–æ–≥–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å:
# INFO - üìÑ –ó–∞–≥—Ä—É–∂–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç: project.pdf
# INFO - üîç –ù–∞—á–∞—Ç –∞–Ω–∞–ª–∏–∑ –º–∞—Ä–æ–∫ –±–µ—Ç–æ–Ω–∞
# INFO - üß† –ó–∞–ø—É—â–µ–Ω Claude –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
# INFO - ‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ
```

### üìä –ü—Ä–∏–º–µ—Ä—ã —Ç–∏–ø–æ–≤—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤

#### 1. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –ü—Ä–æ–µ–∫—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (PDF)
- –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (DOCX)
- –°–º–µ—Ç–∞ (XLSX)

**–ü—Ä–æ—Ü–µ—Å—Å**:
```bash
python analyze_concrete_complete.py \
  --docs architectural_plans.pdf structural_plans.pdf specifications.docx \
  --smeta detailed_budget.xlsx \
  --language ru \
  --output project_analysis/
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**:
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–∞—Ä–æ–∫ –±–µ—Ç–æ–Ω–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ
- –ú–µ—Å—Ç–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–π –º–∞—Ä–∫–∏
- –û–±—ä–µ–º—ã –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å —Å–º–µ—Ç–æ–π

#### 2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π –ø—Ä–æ–µ–∫—Ç–∞

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –í–µ—Ä—Å–∏—è 1 –ø—Ä–æ–µ–∫—Ç–∞ (PDF)
- –í–µ—Ä—Å–∏—è 2 –ø—Ä–æ–µ–∫—Ç–∞ (PDF)

**–ü—Ä–æ—Ü–µ—Å—Å**:
```python
import requests

response = requests.post(
    'http://localhost:8000/compare/docs',
    files={
        'docs': [
            ('project_v1.pdf', open('project_v1.pdf', 'rb')),
            ('project_v2.pdf', open('project_v2.pdf', 'rb'))
        ]
    }
)
```

#### 3. –ê–Ω–∞–ª–∏–∑ —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–º–æ–≤ (–±–µ–∑ –ò–ò)

```bash
python analyze_concrete_complete.py \
  --docs volume_statement.pdf \
  --smeta quantities.xlsx \
  --no-claude \
  --language en
```

---

## 7. –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### üìã –§–æ—Ä–º–∞—Ç—ã –æ—Ç—á–µ—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ü–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

#### 1. JSON —Ñ–æ—Ä–º–∞—Ç (–æ—Å–Ω–æ–≤–Ω–æ–π)

**–§–∞–π–ª**: `outputs/concrete_analysis_report.json`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```json
{
  "success": true,
  "analysis_timestamp": "2025-01-20T10:30:00Z",
  "analysis_method": "hybrid_claude_enhancement",
  "language": "ru",
  "input_files": {
    "documents": ["project.pdf", "specs.docx"],
    "smeta": "budget.xlsx"
  },
  "concrete_summary": [
    {
      "grade": "C25/30",
      "locations": ["—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç", "–∫–æ–ª–æ–Ω–Ω—ã"],
      "volume_m3": 150.5,
      "specifications": {
        "strength_class": "C25/30",
        "exposure_class": "XC1",
        "consistency_class": "S3"
      },
      "smeta_match": {
        "found_in_budget": true,
        "budget_volume": 150.0,
        "variance_percent": 0.33
      }
    }
  ],
  "volume_analysis": {
    "total_concrete_volume": 450.8,
    "by_grade": {
      "C25/30": 150.5,
      "C30/37": 200.3,
      "C35/45": 100.0
    }
  },
  "quality_metrics": {
    "confidence_score": 0.92,
    "data_completeness": 0.88,
    "validation_checks_passed": 15,
    "validation_checks_total": 17
  }
}
```

#### 2. CSV —Ñ–æ—Ä–º–∞—Ç

**–§–∞–π–ª**: `outputs/concrete_grades_summary.csv`

```csv
Grade,Location,Volume_m3,Strength_Class,Exposure_Class,Budget_Match,Budget_Volume,Variance_%
C25/30,—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç,150.5,C25/30,XC1,true,150.0,0.33
C30/37,—Å—Ç–µ–Ω—ã,200.3,C30/37,XF2,true,200.0,0.15
C35/45,–±–∞–ª–∫–∏,100.0,C35/45,XC2,false,0,100.0
```

#### 3. PDF –æ—Ç—á–µ—Ç

**–§–∞–π–ª**: `outputs/concrete_analysis_detailed_report.pdf`

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**:
- –¢–∏—Ç—É–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –æ–±—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–µ–∑—é–º–µ
- –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ –º–∞—Ä–∫–∞–º –±–µ—Ç–æ–Ω–∞
- –¢–∞–±–ª–∏—Ü—ã –æ–±—ä–µ–º–æ–≤ –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π
- –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –∑–∞–º–µ—á–∞–Ω–∏—è

#### 4. Excel –æ—Ç—á–µ—Ç

**–§–∞–π–ª**: `outputs/concrete_analysis_workbook.xlsx`

**–õ–∏—Å—Ç—ã**:
- `Summary`: –æ–±—â–∞—è —Å–≤–æ–¥–∫–∞
- `Concrete_Grades`: –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –º–∞—Ä–∫–∞–º
- `Volumes`: –æ–±—ä–µ–º–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- `Budget_Comparison`: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ —Å–º–µ—Ç–æ–π
- `Issues`: –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### üìä –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∞–Ω–∞–ª–∏–∑–∞

- **Confidence Score** (0-1): –æ–±—â–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
  - 0.9-1.0: –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
  - 0.8-0.9: –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
  - 0.7-0.8: —Å—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å
  - <0.7: –Ω–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞

- **Data Completeness** (0-1): –ø–æ–ª–Ω–æ—Ç–∞ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - 1.0: –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑–≤–ª–µ—á–µ–Ω—ã
  - 0.8-0.99: –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö –∏–∑–≤–ª–µ—á–µ–Ω–æ
  - <0.8: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –º–æ–≥–ª–∞ –±—ã—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–∞

#### –°—Ç–∞—Ç—É—Å—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–º–µ—Ç–µ

- `true`: –º–∞—Ä–∫–∞ –Ω–∞–π–¥–µ–Ω–∞ –≤ —Å–º–µ—Ç–µ
- `false`: –º–∞—Ä–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ —Å–º–µ—Ç–µ
- `partial`: —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
- `unknown`: –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å

#### –£—Ä–æ–≤–Ω–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π –æ–±—ä–µ–º–æ–≤

- **< 5%**: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
- **5-15%**: —É–º–µ—Ä–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è
- **> 15%**: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

### üìà –ü—Ä–∏–º–µ—Ä—ã –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

```json
{
  "success": true,
  "quality_metrics": {
    "confidence_score": 0.94,
    "data_completeness": 0.91
  },
  "concrete_summary": [
    {
      "grade": "C30/37 XF4",
      "locations": ["–Ω–∞—Ä—É–∂–Ω—ã–µ —Å—Ç–µ–Ω—ã", "–∫–æ–ª–æ–Ω–Ω—ã"],
      "volume_m3": 285.7,
      "smeta_match": {
        "found_in_budget": true,
        "variance_percent": 2.1
      }
    }
  ]
}
```

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è**: –í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è–º–∏.

#### –ü—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–∏–∑–∞ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏

```json
{
  "success": true,
  "quality_metrics": {
    "confidence_score": 0.73,
    "data_completeness": 0.65
  },
  "issues": [
    {
      "type": "missing_data",
      "description": "–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å –æ–±—ä–µ–º—ã –¥–ª—è –º–∞—Ä–∫–∏ C40/50",
      "severity": "medium"
    },
    {
      "type": "budget_mismatch",
      "description": "–ú–∞—Ä–∫–∞ C25/30 –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ —Å–º–µ—Ç–µ",
      "severity": "high"
    }
  ]
}
```

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è**: –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —Ä—É—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞.

---

## 8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### üß™ –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ

#### 1. –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `tests/`

**–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤**:
```bash
python -m pytest tests/ -v
```

**–ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞**:
```bash
python -m pytest tests/test_concrete_agent.py -v
```

**–ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞**:
```bash
python -m pytest tests/ --cov=agents --cov-report=html
```

#### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API**:
```bash
python -m pytest tests/test_api_integration.py -v
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Claude –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**:
```bash
python tests/test_claude_integration.py
```

#### 3. –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–µ—Å—Ç—ã

**–ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã**:
```bash
python test_system.py
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
```
=== –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –°–ò–°–¢–ï–ú–´ ===
‚úÖ analyze_concrete_complete.py –Ω–∞–π–¥–µ–Ω
‚úÖ utils/volume_analyzer.py
‚úÖ utils/report_generator.py
‚úÖ utils/czech_preprocessor.py
‚úÖ –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ outputs/
‚úÖ –§—É–Ω–∫—Ü–∏—è analyze_concrete_with_volumes –¥–æ—Å—Ç—É–ø–Ω–∞
‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã
```

### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
mkdir -p tests/test_data/

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
cp examples/sample_inputs/* tests/test_data/
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤

```bash
# –§–∞–π–ª tests/.env.test
ANTHROPIC_API_KEY=test_key_for_development
USE_CLAUDE=false
LOG_LEVEL=DEBUG
MAX_FILE_SIZE=10485760  # 10MB –¥–ª—è —Ç–µ—Å—Ç–æ–≤
```

#### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export $(cat tests/.env.test | xargs)

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
python -m pytest tests/ -v --tb=short
```

### üéØ –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –±–µ—Ç–æ–Ω–∞

```python
# tests/test_concrete_analysis.py
import pytest
from agents.concrete_agent import analyze_concrete

@pytest.mark.asyncio
async def test_concrete_extraction():
    # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    test_docs = ['tests/test_data/sample_project.pdf']
    
    # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞
    result = await analyze_concrete(test_docs, use_claude=False)
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    assert result['success'] is True
    assert len(result['concrete_summary']) > 0
    assert 'C25/30' in [item['grade'] for item in result['concrete_summary']]
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

```python
# tests/test_api_endpoints.py
import pytest
from fastapi.testclient import TestClient
from app.main import app

client = TestClient(app)

def test_health_endpoint():
    response = client.get("/health")
    assert response.status_code == 200
    assert response.json()["status"] == "healthy"

def test_analyze_concrete_endpoint():
    with open('tests/test_data/sample.pdf', 'rb') as f:
        response = client.post(
            "/analyze/concrete",
            files={"docs": ("sample.pdf", f, "application/pdf")}
        )
    assert response.status_code == 200
    assert "concrete_summary" in response.json()
```

### üìä –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD pipeline

```yaml
# .github/workflows/test.yml
name: Test Suite

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.9
    
    - name: Install dependencies
      run: |
        pip install -r requirements.txt
        pip install pytest-cov
    
    - name: Run tests
      run: |
        python -m pytest tests/ --cov=agents --cov-report=xml
    
    - name: Upload coverage
      uses: codecov/codecov-action@v1
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ API
python -c "
import time
import requests

start = time.time()
response = requests.get('http://localhost:8000/health')
end = time.time()

print(f'Response time: {end - start:.3f}s')
print(f'Status: {response.status_code}')
"
```

---

## 9. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### üí° –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

#### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

1. **–ö–∞—á–µ—Å—Ç–≤–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –º–∏–Ω–∏–º—É–º 300 DPI –¥–ª—è —Å–∫–∞–Ω–æ–≤
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ —Ö–æ—Ä–æ—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞
   - –ò–∑–±–µ–≥–∞–π—Ç–µ –ø–µ—Ä–µ–∫–æ—Å–æ–≤ –∏ —Ä–∞–∑–º—ã—Ç–æ—Å—Ç–∏

2. **–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤**:
   - –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PDF —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º
   - DOCX –ª—É—á—à–µ DOC –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
   - Excel —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —á–µ—Ç–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

3. **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞: `project_specifications.pdf`
   - –ò–∑–±–µ–≥–∞–π—Ç–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ –∏ –ø—Ä–æ–±–µ–ª–æ–≤
   - –í–∫–ª—é—á–∞–π—Ç–µ –≤–µ—Ä—Å–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞: `budget_v2.xlsx`

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Claude AI**:
   - –í–∫–ª—é—á–∞–π—Ç–µ Claude –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –†–µ–∂–∏–º `enhancement` –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –†–µ–∂–∏–º `primary` –¥–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ò–ò-–æ–±—Ä–∞–±–æ—Ç–∫–∏

2. **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**:
   - –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ –ø—Ä–æ–µ–∫—Ç–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - –í–∫–ª—é—á–∞–π—Ç–µ —Å–º–µ—Ç—É –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### üöÄ –†–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

```bash
# –†–∞–∑–±–∏–≤–∫–∞ –±–æ–ª—å—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —á–∞—Å—Ç–∏
python analyze_concrete_complete.py \
  --docs architectural_part*.pdf \
  --output results/architectural/

python analyze_concrete_complete.py \
  --docs structural_part*.pdf \
  --output results/structural/

# –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
python utils/merge_reports.py \
  --input results/architectural/ results/structural/ \
  --output results/complete_project/
```

#### –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```python
# scripts/batch_process.py
import os
import asyncio
from pathlib import Path
from agents.concrete_agent import analyze_concrete_with_volumes

async def process_project_batch(projects_dir):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤"""
    
    for project_folder in Path(projects_dir).iterdir():
        if project_folder.is_dir():
            print(f"–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞: {project_folder.name}")
            
            # –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
            docs = list(project_folder.glob("*.pdf"))
            smeta = list(project_folder.glob("*.xlsx"))
            
            if docs:
                result = await analyze_concrete_with_volumes(
                    doc_paths=[str(d) for d in docs],
                    smeta_path=str(smeta[0]) if smeta else None,
                    language='ru',
                    output_dir=f"results/{project_folder.name}"
                )
                
                print(f"‚úÖ –ü—Ä–æ–µ–∫—Ç {project_folder.name} –æ–±—Ä–∞–±–æ—Ç–∞–Ω")
            else:
                print(f"‚ö†Ô∏è –î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ {project_folder.name}")

# –ó–∞–ø—É—Å–∫
asyncio.run(process_project_batch("projects/"))
```

### ‚ö†Ô∏è –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫

#### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

1. **–û—à–∏–±–∫–∞ "File too large"**:
   ```bash
   # –†–µ—à–µ–Ω–∏–µ: —É–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –≤ .env
   MAX_FILE_SIZE=104857600  # 100MB
   ```

2. **–û—à–∏–±–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ —Ç–µ–∫—Å—Ç–∞**:
   ```python
   # –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
   import chardet
   
   with open('document.txt', 'rb') as f:
       result = chardet.detect(f.read())
       print(f"–ö–æ–¥–∏—Ä–æ–≤–∫–∞: {result['encoding']}")
   ```

3. **–ù–µ—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º `claude_mode=primary`
   - –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

4. **–ü—Ä–æ–±–ª–µ–º—ã —Å API**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   curl -v http://localhost:8000/health
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
   tail -f logs/concrete_analysis.log
   ```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

```python
# –í–∫–ª—é—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
import logging

logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
import psutil
import os

def monitor_resources():
    process = psutil.Process(os.getpid())
    memory = process.memory_info()
    cpu = process.cpu_percent()
    
    print(f"–ü–∞–º—è—Ç—å: {memory.rss / 1024 / 1024:.1f} MB")
    print(f"CPU: {cpu}%")
```

### üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

```bash
# –ó–∞–ø—É—Å–∫ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–æ—Ä–∫–µ—Ä–∞–º–∏
gunicorn app.main:app \
  -w 4 \
  -k uvicorn.workers.UvicornWorker \
  --bind 0.0.0.0:8000 \
  --worker-connections 1000 \
  --max-requests 1000 \
  --max-requests-jitter 100
```

#### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```python
# utils/cache_manager.py
import hashlib
import json
from pathlib import Path

class ResultsCache:
    def __init__(self, cache_dir="cache"):
        self.cache_dir = Path(cache_dir)
        self.cache_dir.mkdir(exist_ok=True)
    
    def get_cache_key(self, files, params):
        # –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
        content = f"{files}_{params}"
        return hashlib.md5(content.encode()).hexdigest()
    
    def get_cached_result(self, cache_key):
        cache_file = self.cache_dir / f"{cache_key}.json"
        if cache_file.exists():
            return json.loads(cache_file.read_text())
        return None
    
    def save_result(self, cache_key, result):
        cache_file = self.cache_dir / f"{cache_key}.json"
        cache_file.write_text(json.dumps(result, ensure_ascii=False))
```

---

## 10. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### üîß –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞

```python
# agents/new_agent/agent.py
from typing import List, Dict, Any
import logging

logger = logging.getLogger(__name__)

class NewAnalysisAgent:
    """–ù–æ–≤—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞"""
    
    def __init__(self, config: Dict[str, Any] = None):
        self.config = config or {}
        logger.info("ü§ñ –ù–æ–≤—ã–π –∞–≥–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
    
    async def analyze(self, documents: List[str]) -> Dict[str, Any]:
        """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞"""
        try:
            results = []
            
            for doc_path in documents:
                # –õ–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
                doc_result = await self._process_document(doc_path)
                results.append(doc_result)
            
            return {
                "success": True,
                "agent": "NewAnalysisAgent",
                "results": results,
                "processed_files": len(documents)
            }
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –≤ –∞–Ω–∞–ª–∏–∑–µ: {e}")
            return {
                "success": False,
                "error": str(e)
            }
    
    async def _process_document(self, doc_path: str) -> Dict[str, Any]:
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞"""
        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
        return {
            "file": doc_path,
            "data": "processed_data"
        }

def get_new_agent(config: Dict[str, Any] = None) -> NewAnalysisAgent:
    """–§–∞–±—Ä–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞"""
    return NewAnalysisAgent(config)
```

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º—É

```python
# routers/new_analysis.py
from fastapi import APIRouter, UploadFile, File, HTTPException
from agents.new_agent.agent import get_new_agent
import tempfile
import os

router = APIRouter()

@router.post("/new-analysis")
async def new_analysis_endpoint(
    docs: list[UploadFile] = File(...)
):
    temp_dir = tempfile.mkdtemp()
    try:
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
        doc_paths = []
        for file in docs:
            path = os.path.join(temp_dir, file.filename)
            with open(path, "wb") as f:
                f.write(await file.read())
            doc_paths.append(path)
        
        # –ê–Ω–∞–ª–∏–∑
        agent = get_new_agent()
        result = await agent.analyze(doc_paths)
        
        return result
    
    finally:
        # –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
        import shutil
        shutil.rmtree(temp_dir)
```

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –≥–ª–∞–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

```python
# app/main.py (–¥–æ–±–∞–≤–∏—Ç—å –≤ setup_routers_fallback)
("routers.new_analysis", "router", "/analyze", ["NewAnalysis"]),
```

### üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

#### –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# 1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env .env.backup
cp -r outputs/ outputs_backup/

# 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
git pull origin main

# 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt --upgrade

# 4. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
python scripts/migrate_data.py

# 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
python test_system.py

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl restart concrete-agent
```

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
#!/bin/bash
# scripts/auto_update.sh

echo "üîÑ –ù–∞—á–∞–ª–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Concrete Agent"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
git fetch origin
LOCAL=$(git rev-parse HEAD)
REMOTE=$(git rev-parse origin/main)

if [ $LOCAL = $REMOTE ]; then
    echo "‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞"
    exit 0
fi

echo "üì• –ù–∞–π–¥–µ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –Ω–∞—á–∏–Ω–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É..."

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl stop concrete-agent

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
cp .env .env.backup.$(date +%Y%m%d_%H%M%S)

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
git pull origin main

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
if python test_system.py; then
    echo "‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ"
    sudo systemctl start concrete-agent
    echo "üöÄ –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏ –∑–∞–ø—É—â–µ–Ω–∞"
else
    echo "‚ùå –¢–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—à–ª–∏, –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π"
    git reset --hard $LOCAL
    sudo systemctl start concrete-agent
    exit 1
fi
```

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

#### –°–∏—Å—Ç–µ–º–∞ –º–µ—Ç—Ä–∏–∫

```python
# utils/metrics.py
import time
import json
from pathlib import Path
from datetime import datetime

class MetricsCollector:
    def __init__(self, metrics_file="logs/metrics.json"):
        self.metrics_file = Path(metrics_file)
        self.metrics_file.parent.mkdir(exist_ok=True)
    
    def record_analysis(self, 
                       files_count: int,
                       processing_time: float,
                       success: bool,
                       agent_type: str):
        
        metric = {
            "timestamp": datetime.now().isoformat(),
            "files_count": files_count,
            "processing_time": processing_time,
            "success": success,
            "agent_type": agent_type
        }
        
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏
        metrics = self._load_metrics()
        metrics.append(metric)
        
        with open(self.metrics_file, 'w') as f:
            json.dump(metrics, f, ensure_ascii=False, indent=2)
    
    def _load_metrics(self):
        if self.metrics_file.exists():
            return json.loads(self.metrics_file.read_text())
        return []
    
    def get_statistics(self):
        metrics = self._load_metrics()
        
        total_analyses = len(metrics)
        successful = sum(1 for m in metrics if m['success'])
        avg_time = sum(m['processing_time'] for m in metrics) / total_analyses if total_analyses > 0 else 0
        
        return {
            "total_analyses": total_analyses,
            "success_rate": successful / total_analyses if total_analyses > 0 else 0,
            "average_processing_time": avg_time,
            "last_analysis": metrics[-1] if metrics else None
        }

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
metrics = MetricsCollector()
start_time = time.time()

# ... –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ ...

metrics.record_analysis(
    files_count=3,
    processing_time=time.time() - start_time,
    success=True,
    agent_type="ConcreteAgent"
)
```

#### Dashboard –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```python
# utils/dashboard.py
from fastapi import APIRouter
from fastapi.responses import HTMLResponse
from utils.metrics import MetricsCollector

dashboard_router = APIRouter()

@dashboard_router.get("/dashboard", response_class=HTMLResponse)
async def get_dashboard():
    metrics = MetricsCollector()
    stats = metrics.get_statistics()
    
    html_content = f"""
    <!DOCTYPE html>
    <html>
    <head>
        <title>Concrete Agent Dashboard</title>
        <style>
            body {{ font-family: Arial, sans-serif; margin: 40px; }}
            .metric {{ background: #f0f0f0; padding: 20px; margin: 10px 0; border-radius: 5px; }}
            .success {{ color: green; }}
            .error {{ color: red; }}
        </style>
    </head>
    <body>
        <h1>üìä Concrete Agent Dashboard</h1>
        
        <div class="metric">
            <h3>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <p>–í—Å–µ–≥–æ –∞–Ω–∞–ª–∏–∑–æ–≤: <strong>{stats['total_analyses']}</strong></p>
            <p>–£—Å–ø–µ—à–Ω–æ—Å—Ç—å: <strong class="success">{stats['success_rate']:.1%}</strong></p>
            <p>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: <strong>{stats['average_processing_time']:.2f}—Å</strong></p>
        </div>
        
        <div class="metric">
            <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–π –∞–Ω–∞–ª–∏–∑</h3>
            <pre>{stats['last_analysis']}</pre>
        </div>
    </body>
    </html>
    """
    
    return html_content
```

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```python
# config/security.py
import os
from functools import wraps
from fastapi import HTTPException, Depends
from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials

security = HTTPBearer()

def require_api_key(credentials: HTTPAuthorizationCredentials = Depends(security)):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞"""
    expected_key = os.getenv("API_KEY")
    
    if not expected_key:
        return True  # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞
    
    if credentials.credentials != expected_key:
        raise HTTPException(
            status_code=401,
            detail="–ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π API –∫–ª—é—á"
        )
    
    return True

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–æ—É—Ç–µ—Ä–∞—Ö
@router.post("/analyze/concrete")
async def analyze_concrete_endpoint(
    docs: list[UploadFile] = File(...),
    authenticated: bool = Depends(require_api_key)
):
    # –õ–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
    pass
```

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

```python
# utils/file_security.py
import os
from pathlib import Path

class SecureFileHandler:
    def __init__(self, allowed_dirs=['uploads', 'examples']):
        self.allowed_dirs = [Path(d).resolve() for d in allowed_dirs]
    
    def is_safe_path(self, filepath: str) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É"""
        try:
            resolved_path = Path(filepath).resolve()
            
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
            for allowed_dir in self.allowed_dirs:
                if str(resolved_path).startswith(str(allowed_dir)):
                    return True
            
            return False
        
        except Exception:
            return False
    
    def validate_file_extension(self, filename: str) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–∞"""
        allowed_extensions = {'.pdf', '.docx', '.doc', '.txt', '.xlsx', '.xls', '.csv', '.xml'}
        extension = Path(filename).suffix.lower()
        return extension in allowed_extensions
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã

### üÜò –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

1. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: `http://localhost:8000/docs`
2. **–õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã**: `logs/concrete_analysis.log`
3. **GitHub Issues**: [–°–æ–∑–¥–∞—Ç—å issue](https://github.com/alpro1000/concrete-agent/issues)

### üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ API –∫–ª—é—á–∞ Claude
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–µ—Å—Ç—ã: `python test_system.py`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

```bash
# –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
python -c "
import sys
print(f'Python –≤–µ—Ä—Å–∏—è: {sys.version}')

try:
    import anthropic
    print('‚úÖ anthropic —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')
except ImportError:
    print('‚ùå anthropic –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')

try:
    from app.main import app
    print('‚úÖ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ')
except ImportError as e:
    print(f'‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: {e}')

import os
if os.getenv('ANTHROPIC_API_KEY'):
    print('‚úÖ ANTHROPIC_API_KEY —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')
else:
    print('‚ùå ANTHROPIC_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')
"
```

---

**¬© 2025 Concrete Agent. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.**

*–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.*