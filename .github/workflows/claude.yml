name: Claude Helper

on:
  issue_comment:
    types: [created]

jobs:
  help:
    if: contains(github.event.comment.body, '@claude')
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Simple Analysis
        run: |
          echo "ðŸ¤– Claude Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚..."
          
          # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ
          if [ -d "agents" ]; then
            echo "âœ… ÐŸÐ°Ð¿ÐºÐ° agents Ð½Ð°Ð¹Ð´ÐµÐ½Ð°"
          else
            echo "âŒ ÐŸÐ°Ð¿ÐºÐ° agents Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚"
            mkdir -p agents
            echo "ðŸ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð° Ð¿Ð°Ð¿ÐºÐ° agents"
          fi
          
          # Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ð¹ README ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾
          if [ ! -f "README.md" ]; then
            cat > README.md << 'EOF'
          # Czech Construction Management System
          
          Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°Ð¼Ð¸ Ð´Ð»Ñ Ð§ÐµÑ…Ð¸Ð¸.
          
          ## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°:
          - `agents/` - Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð°Ð³ÐµÐ½Ñ‚Ñ‹
          - `config/` - ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹  
          - `utils/` - Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹ Ð¸ Ð²ÑÐ¿Ð¾Ð¼Ð¾Ð³Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
          
          ## Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ñ‹:
          - Ð‘ÐµÑ‚Ð¾Ð½: ÄŒSN EN 206+A2
          - Ð¡Ñ‚Ð°Ð»ÑŒ: ÄŒSN EN 10025
          - Ð¢ÐµÐ¿Ð»Ð¾Ñ‚ÐµÑ…Ð½Ð¸ÐºÐ°: ÄŒSN 73 0540
          
          Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ `@claude` Ð² Issues Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸.
          EOF
            echo "ðŸ“„ Ð¡Ð¾Ð·Ð´Ð°Ð½ README.md"
          fi

      - name: Comment
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `ðŸ¤– **Claude Assistant Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚:**
              
              ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ Ð¿Ñ€Ð¾Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð» Ð¿Ñ€Ð¾ÐµÐºÑ‚. 
              
              Ð—Ð°Ð¿Ñ€Ð¾Ñ: "${context.payload.comment.body}"
              
              âœ… Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð°
              ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð°
              
              Ð§Ñ‚Ð¾ Ñ Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ:
              - \`@claude Ð°Ð½Ð°Ð»Ð¸Ð· ÐºÐ¾Ð´Ð°\` - Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð´Ð°
              - \`@claude ÑÐ¾Ð·Ð´Ð°Ð¹ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ\` - Ð±Ð°Ð·Ð¾Ð²Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°
              - \`@claude Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ Ñ Ð±ÐµÑ‚Ð¾Ð½Ð¾Ð¼\` - ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ñ‹ ÄŒSN EN 206
              
              ---
              *Claude Assistant Ð´Ð»Ñ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð²* ðŸ—ï¸`
            });
