# üöÄ Concrete-Agent - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/alpro1000/concrete-agent.git
cd concrete-agent

# 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã
python setup_modules.py

# 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
uvicorn app.main:app --reload
```

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

#### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∞–≥–µ–Ω—Ç–æ–≤ ‚úÖ

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤—Å–µ —Ä–∞–±–æ—á–∏–µ –º–æ–¥—É–ª–∏:

```
agents/
‚îú‚îÄ‚îÄ concrete_agent/agent.py          ‚úÖ ConcreteGradeExtractor
‚îú‚îÄ‚îÄ volume_agent/agent.py            ‚úÖ VolumeAnalysisAgent  
‚îú‚îÄ‚îÄ material_agent/agent.py          ‚úÖ MaterialAnalysisAgent
‚îú‚îÄ‚îÄ tzd_reader_secure.py             ‚úÖ SecureAIAnalyzer
‚îú‚îÄ‚îÄ smetny_inzenyr/agent.py          ‚úÖ SmetnyInzenyr
‚îî‚îÄ‚îÄ dwg_agent/agent.py               ‚úÖ DwgAnalysisAgent
```

#### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ—É—Ç–µ—Ä–æ–≤ ‚úÖ

–í—Å–µ —Ä–æ—É—Ç–µ—Ä—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –æ–±—ä–µ–∫—Ç `router` –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å FastAPI:

```
routers/
‚îú‚îÄ‚îÄ analyze_concrete.py              ‚úÖ /concrete
‚îú‚îÄ‚îÄ analyze_materials.py             ‚úÖ /materials
‚îú‚îÄ‚îÄ analyze_volume.py                ‚úÖ /volume
‚îú‚îÄ‚îÄ version_diff.py                  ‚úÖ /docs, /smeta
‚îú‚îÄ‚îÄ upload.py                        ‚úÖ /files
‚îî‚îÄ‚îÄ tzd_router.py                    ‚úÖ /api/v1/tzd/*
```

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —É—Ç–∏–ª–∏—Ç ‚úÖ

```
utils/
‚îú‚îÄ‚îÄ knowledge_base_service.py        ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
‚îú‚îÄ‚îÄ report_generator.py              ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
‚îî‚îÄ‚îÄ czech_preprocessor.py            ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

parsers/
‚îú‚îÄ‚îÄ doc_parser.py                    ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
‚îî‚îÄ‚îÄ smeta_parser.py                  ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
```

#### 4. –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–æ—É—Ç–µ—Ä–æ–≤ ‚úÖ

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: ‚úÖ `app/core/router_registry.py`
- **Fallback —Å–∏—Å—Ç–µ–º–∞**: ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–æ–µ —Ä—É—á–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- **–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Swagger UI**

#### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚úÖ

```bash
pip install -r requirements.txt
```

–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- ‚úÖ `fastapi==0.104.1`
- ‚úÖ `uvicorn[standard]==0.24.0`
- ‚úÖ `pdfplumber==0.11.0`
- ‚úÖ `python-docx==1.1.0`
- ‚úÖ `anthropic==0.35.0`

## –î–æ—Å—Ç—É–ø–Ω—ã–µ Endpoints

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ API endpoints:

### –û—Å–Ω–æ–≤–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã:
- `POST /concrete` - –ê–Ω–∞–ª–∏–∑ –±–µ—Ç–æ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- `POST /materials` - –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤  
- `POST /volume` - –ê–Ω–∞–ª–∏–∑ –æ–±—ä–µ–º–æ–≤ —Ä–∞–±–æ—Ç

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
- `POST /docs` - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `POST /smeta` - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–º–µ—Ç

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ (TZD):
- `POST /api/v1/tzd/api/v1/tzd/analyze` - –ê–Ω–∞–ª–∏–∑ –¢–ó–î
- `GET /api/v1/tzd/api/v1/tzd/health` - –°—Ç–∞—Ç—É—Å TZD Reader

### –£—Ç–∏–ª–∏—Ç—ã:
- `POST /files` - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- `GET /status` - –î–µ—Ç–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `GET /docs` - Swagger UI
- `GET /` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
uvicorn app.main:app --reload --port 8000
```

### –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—É—Å–∫–µ:
```
[INFO] üöÄ Construction Analysis API –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...
[INFO] üì¶ –°—Ç–∞—Ç—É—Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: {'anthropic': True, 'pdfplumber': True, ...}
[INFO] ‚úÖ –†–æ—É—Ç–µ—Ä analyze_concrete –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ
[INFO] ‚úÖ –†–æ—É—Ç–µ—Ä analyze_materials –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ
[INFO] ‚úÖ –†–æ—É—Ç–µ—Ä analyze_volume –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ
[INFO] ‚úÖ –†–æ—É—Ç–µ—Ä version_diff –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ
[INFO] ‚úÖ –†–æ—É—Ç–µ—Ä upload –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ
[INFO] ‚úÖ –†–æ—É—Ç–µ—Ä tzd_router –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ
[INFO] üìä –£—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ 6/6 —Ä–æ—É—Ç–µ—Ä–æ–≤
[INFO] ‚úÖ –°–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω
```

### –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost:8000/health

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
curl -X POST "http://localhost:8000/materials" \
     -F "docs=@test_document.pdf"

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –±–µ—Ç–æ–Ω–∞
curl -X POST "http://localhost:8000/concrete" \
     -F "docs=@technical_spec.pdf" \
     -F "smeta=@budget.xlsx"
```

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ CI/CD

### GitHub Actions (–ø—Ä–∏–º–µ—Ä):
```yaml
name: Deploy Concrete-Agent
on: [push]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Setup Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.9'
    - name: Install and setup
      run: |
        pip install -r requirements.txt
        python setup_modules.py
    - name: Run tests
      run: |
        python -m pytest tests/
    - name: Deploy to Render
      run: |
        # –î–µ–ø–ª–æ–π –∫–æ–º–∞–Ω–¥—ã
```

### Docker (–ø—Ä–∏–º–µ—Ä):
```dockerfile
FROM python:3.9-slim

COPY . /app
WORKDIR /app

RUN pip install -r requirements.txt
RUN python setup_modules.py

CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ —Ä–æ—É—Ç–µ—Ä—ã –Ω–µ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ `router = APIRouter()` –≤ –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ —Ä–æ—É—Ç–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç–æ–≤ –∞–≥–µ–Ω—Ç–æ–≤
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python setup_modules.py` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ï—Å–ª–∏ –∞–≥–µ–Ω—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `setup_report.json` –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º–ø–æ—Ä—Ç—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –ï—Å–ª–∏ –∞–Ω–∞–ª–∏–∑ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã —Å–æ–¥–µ—Ä–∂–∞—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π

## –†–µ–∑—É–ª—å—Ç–∞—Ç —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

‚úÖ **–í—Å–µ –∞–≥–µ–Ω—Ç—ã –∞–∫—Ç–∏–≤–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ**  
‚úÖ **6/6 —Ä–æ—É—Ç–µ—Ä–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**  
‚úÖ **–ê–Ω–∞–ª–∏–∑ –±–µ—Ç–æ–Ω–∞, –æ–±—ä–µ–º–æ–≤, –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –¢–ó–î —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç**  
‚úÖ **Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `/docs`**  
‚úÖ **–ù–µ—Ç —Ä–µ–∂–∏–º–∞ demo_mode –∏–ª–∏ –∑–∞–≥–ª—É—à–µ–∫**  

üöÄ **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**